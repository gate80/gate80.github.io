<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!--
  Powered by Gate5 engine

  Copyright (c) 2008-2009 Sergey I. Sharybin <g.ulairi@gmail.com>

  This program can be distributed under the terms of GNU GPL.
-->

<html>
  
<!-- Mirrored from school9.perm.ru/gate/articles/about/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 27 May 2018 17:00:21 GMT -->
<head>
    <title>GATE</title>
<link rel="stylesheet" type="text/css" href="../../styles/content.css">
<link rel="stylesheet" type="text/css" href="../../styles/pages.css">
<meta http-equiv="content-language" content="ru">
<meta name="url" content="../../index.html">
<meta name="keywords" content="school9 sch9 gateway gate tester webtester">
<meta name="description" content="OnLine testing system">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="robots" content="all">
<link rel="icon" href="../../pics/favicon.ico" type="image/x-icon">
<link rel="SHORTCUT ICON" href="../../pics/favicon.ico">
<script language="JavaScript" type="text/javascript">
  var http_host = "https://school9.perm.ru/";
  var document_root = "https://school9.perm.ru/gate";
  var engine = "GECKO";
  var isGecko = true;
  var isMSIE = false;
  var force_url = '';
</script>
<script language="JavaScript" type="text/JavaScript" src="../../scripts/core.js"></script>
<script language="JavaScript" type="text/JavaScript" src="../../scripts/content.js"></script>
<script language="JavaScript" type="text/JavaScript" src="../../scripts/ipc.js"></script>
    <script language="JavaScript" type="text/javascript">
      function body_onmousemove (event) {
        if (core_StoreMousePos (event)) return false;
        return true;
      }
    </script>
  </head>
  <body onmousemove="if (!body_onmousemove (event)) return false;" id="content">
    <table width="100%">
      <tr>
        <td id="leftCatchword" valign="top">
          <table>
            <tr>
              <td>
                <div id="logo">
                  <img src="../../pics/wt_l.gif" alt="logo" onclick="nav ('/gate');">
                </div>
                <div id="nav">
<div class="menu">
  <div class="cpt">Навигация</div>
  <div class="body">
    <ul>
      <li><a href="../../index.html">Заглавная страница</a></li>
      <li><a href="../../tester/index0be6.html?redirect=%2Fgate%2Farticles%2Fabout%2F">Олимпиады</a></li>
      <li><a href="../trainings/index.html">Тренировки</a></li>
    </ul>
  </div>
</div>
<div class="menu" style="padding-top: 8px;">
  <div class="cpt">Wiki</div>
  <div class="body">
    <ul>
      <li><a href="../news/index.html">Новости</a></li>
      <li><a href="../FAQ/index.html">ЧаВо</a></li>
      <li><a href="../nicety/index.html">Тонкости работы в системе</a></li>
      <li><a href="../rules/index.html">Правила</a></li>
      <li><a href="index.html">О проекте</a></li>
      <li><a href="../contacts/index.html">Наши контакты</a></li>
    </ul>
  </div>
</div>
<div class="menu" style="padding-top: 8px;">
  <div class="cpt">Ресурсы</div>
  <div class="body">
    <ul>
      <li><a href="../../resources/downloads/index.html">Downloads</a></li>
    </ul>
  </div>
</div>
                </div>
                <img src="../../pics/clear.gif" width="145" height="1" alt="">
              </td>
            </tr>
          </table>
        </td>
        <td valign="top" style="width: 100%;">
          <table id="container">
            <tr><td style="padding: 2px 0;"><div class="transp_menu"><table class="hor_menu"><tr><td align="right">
  <table class="cntsmall"><tr>
    <td class="first"><span class="imghref" style="background: url(../../pics/key.gif) no-repeat left center;"><a href="../../login/index0be6.html?redirect=%2Fgate%2Farticles%2Fabout%2F">Представиться системе / Зарегистрироваться</a></span></td>
    <td class="sep">::</td>
    <td><a href="../../admin/index0be6.html?redirect=%2Fgate%2Farticles%2Fabout%2F">Административный интерфейс</a></td>
  </tr></table>
</td></tr></table>
</div>
</td></tr>
            <tr>
              <td style="padding-left: 8px;">
                <table class="frame">
  <tr class="h">
    <td class="sp"><img src="../../pics/clear.gif" class="sep16" alt=""></td>
    <td class="tc"><div><a href="JavaScript:refreshPage ('%2Fgate%2Farticles%2Fabout%2F')" title="Чтение статьи">Статья</a></div></td>
    <td class="sp"><img src="../../pics/clear.gif" class="sep16" alt=""></td>
    <td class="sp" style="width: 100%">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="5"><div class="frame_cnt"><div id="navigator">О проекте</div>

<P>Ко всем более-менее крупным проектам прилагается история. Вот я и решил написать историю этой системы. Но начну, пожалуй, с небольшой предыстории. <BR></P><P>Холодной зимой 2005-2006 года мы сидели и пили кофе в лаборантской. За этим занятием одному из моих коллег Антону Шульгину пришла в голову очередная, как тогда казалось, бредовая идея по доработке имеющегося тогда клиентской части (Web-интерфейса) тестирующей системы WebTester. Конкретно требовалось добавить возможность сортировки задач, объеденения их в группы (для упрощения поиска), и т.д. После недели споров я решил-таки сделать сию фичу и реализовал ее на файловой системе, основанной на сервере баз данных MySQL. Потом на ее основе написал сохранение мотниторов (состояний участников на определенном контесте, т.е. соревновании или олимпиаде). Подумалось - вкусная вещь, надо поглобальней ее заинтегрировать. Сказано - сделано. Не сразу конечно, но уже тогда зарождалась идея о динамическом ядре системы. Много ночей было просижено и в один прекрасный момент я сел за реализацию нового проекта из подготовленного комплекта скриптов.<BR></P><P>Сначала я изучил внутреннюю структуру тогдашней тестирующей системы (автор - Василенко С.А.). Все, что мне в ней понравилось в ней: - простой и быстрый в реализации принцип хранения ассоциативных массивов в базе и реализация ДБФС - файловая система базы данных , которая, собственно, и взята оттуда. Этот прицип сериализации был хорош тем, что легко реализовывался как на PHP, так и на C, который изначально плохо предназначен для таких целей. Далее поразгребал основной сайт. Интересовала, в основном, библиотека виджетов - clib. Немного порылся и в форуме, но в итоге, большая часть кода писалась с нуля. Изначально статическим было только ядро vcl'a (аналога clib'а, в отличие от последнего являющимся набором макросов (для ускорения работы)). Все остальное было в базе. Сначала казалось, что это зорово, что это так и останется. Но... Наши надежды не оправдались - во время промежуточного тестирования выяснилось, что каждый раз прокручивается примерно 40 килобайт кода, который был раскидан по различным файлам, хранящимся в БД. Да - до страуса далековато... Добавление кэша к файловой системе не помогло - привязывать его к сессии нельзя (мало ли что бывает при параллельном редактировании - без обращения к базе все-равно не узнать), а обращений к одному файлу было очень мало (странно?). Но на самом-то деле это немного помогло, так как кэшировались идентификаторы каталогов, что ускоряло работу при обращении к потомкам этого каталога. Но все равно есть к чему стремиться. Тут в голову пришла мудрая мысль (наверное, первая за все время работы): перенести на статическую файловую систему и ядро, попутно развернув ftp-сервер или обычный windows-обменник для доступа из внешней части интернета. Переходим и... Скорость поднялась раз в 5. Как минимум. Жить, наконец-то, стало можно. Потом начались экзамены, поступления. Проект немножко приостановился.<BR></P><P>Продолжил работу над системой с переписования основного файла стилей - и красивее стало, и стандартезированнее, и весить (занимать место на диске) стало меньше. Лепота... Но интерфейс мне, да и не только мне, честно сказать, не очень понравился. Конкретно смущала серая цветовая гамма и куча свободного места на страницах. Так как параллельно с этой системой создавался Сергеем Василенко новый школьный сайт, то мы решили сделать интерфейс тестирующей системы похожим на него (на Сегу ;)). Особенно порадовал новый логотип - стилизованная собачка (@). Во-первых, намек на принадлежность к интернету. Во-вторых, это что-то типа девятки в девятке (hyvä huomenta родная школа). Не считайте нас заядлыми символистами, но, согласитесь, в этом что-то есть... Переделали интерфейс, перерисовали иконки.. Получили вполне завершенную версию клиентской части тестирующей системы.<BR></P><P>Но запустить его для всеобщего пользования так и не получилось. Во-первых, не была готова серверная часть тестирующей системы. Во-вторых, время идет, все развивается, потребности меняются, код постоянно улучшается.. Не то, чтобы получившийся Web-интерфейс был плохим, но можно было сделать много лучше.<BR></P><P>Прошли очередные экзамены, и я вплотную взялся за написание серверной части системы. Основная часть кода ядра была взята из уже готовых проектов и черновиков, в том числе той Develop-версии сервера, который создавался параллельно с Web-интерфейсом. Но самая сложная в реализации часть - профилирование процессов (грубо говоря, слежение за использованием различных ресурсов) написана не была. Все осложнялось еще и тем, что никто из моих знакомых не знал, как это реализовывать, и на чем вообще базироваться. Остальной код был написан и даже отдебаган, но решение проблемы с профилированием так и не приходило. Появилось какое-то количество свободного времени, которое я занял переписыванием скриптов Web-интерфейса. Через некоторое время появился движок наподобие википедии. То есть велась полная история изменений страницы, настраиваемые права доступа к разделу, возможность вносить изменения в статью любым пользователям (которым такая возможность разрешена), ну и прочие вкусные вещи. Потом подумал: а почему бы и клиента тестирующей системы не перетянуть на этот движок? Ничего говорящего против этого я не нашел и работа закипела.. Ровно как закипела и работа над сервером. Как раз в это время появился следующий релиз ядра линукса, и при его конфигурировании была найдена такая вещь, как пересылка информации о процессе из окружения ядра в окружение пользователя. Эта опция имела по мимо статуса [NEW], статус [EXPERIMENTAL], но ждать, пока выйдет стабильная версия сией опции было неохота. На прочитывание пошло очередные n+t килобайт документаций, перепробовано куча вариантов, как лучше эту фичу использовать.. Но это уже было лишь вопросом времени.<BR></P><P>Но вот сервер кое-как задышал, я немного напрягся и подвел клиента к стадии `можно тестировать. но только тестировать`. После этого потребовалось некоторое время на стабилизацию кода, устранение утечек памяти, и т.п. Работать в одном потоке тестирования он начал практически стабильно и, вроде как, без утечек памяти. Потом я уехал в лагерь, и тестировать там эту систему не представлялось возможным. Но свободного времени было довольно много, делать особо нечего, вот я и сидел и прочитывал исходные тексты сервера, исправлял опечатки, отлаживал сомнительные места, повышал читаемость кода. По возвращении домой откомпилил, немного додебагал, потом подшлифовал клиента, после чего стало можно во внутреннем круге показать это детище. Особо никто не ругался, кое-что кому-то даже понравилось, ну и решено было запускать эту систему. С серверной частью проблем особых не возникло, а вот клиент был внешне немного пустым, и эти пустоты надо чем-то закрывать. Собственно, чем я сейчас и занимаюсь. Благо движок системы позволяет делать это без особых усилий.<BR></P><DIV STYLE='text-align: right'>Автор системы, С. И. Шарыбин.</DIV></div></td>
  </tr>
</table>


              </td>
            </tr>
          </table>
          <img src="../../pics/clear.gif" width="620" height="1" alt="">
        </td>
      </tr>
      <tr>
        <td colspan="2"><div id="footer" style="padding-bottom: 4px;">
  <!--<center>
    <small>
      <span class="contentSub">[DEBUG] Страница была сгенерирована за 0.023001909255981сек. Использовано запросов: 29</span>
    </small>
  </center>-->
  <div id="hr" style="margin: 6px 0 1px 0;"></div>
  <table width="100%" class="small">
    <tr>
      <td width="50%">Powered by Gate5 Engine (c) 2006-2010 nazgul</td>
      <td align="right">Все права защищены (с) 2008 sch9 team</td>
    </tr>
  </table>
</div>

</td>
      </tr>
    </table>
  </body>

<!-- Mirrored from school9.perm.ru/gate/articles/about/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 27 May 2018 17:00:21 GMT -->
</html>
